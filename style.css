/* Custom Theme & Animations */
:root {
    --gold: #fbbf24;
    --deep-blue: #0f172a;
    --soft-white: #f8fafc;
    --royal-red: #be123c; 
    --royal-red-dark: #881337;
    --royal-red-deep: #4c0519;
}

body {
    background: radial-gradient(circle at center, #1e1b4b 0%, #020617 100%); 
    color: var(--soft-white);
    font-family: 'Lora', serif;
    overflow-x: hidden;
    cursor: default;
}

h1, h2, .script-font {
    font-family: 'Dancing Script', cursive;
}

.sans-font {
    font-family: 'Montserrat', sans-serif;
}

/* Smooth Scrolling */
html {
    scroll-behavior: smooth;
}

/* Snow Canvas */
#snow-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
}

/* Fade In/Up Animation Classes */
.reveal-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 1.5s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.reveal-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
}

/* Glassmorphism */
.glass-card {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    transition: all 0.5s ease;
}

.glass-card:hover {
    border-color: rgba(190, 18, 60, 0.3);
    box-shadow: 0 10px 40px rgba(190, 18, 60, 0.1);
}

/* Magical Lights Animation */
.glow-light {
    position: absolute;
    border-radius: 50%;
    filter: blur(12px);
    opacity: 0.6;
    animation: floatLight 6s infinite ease-in-out alternate;
}

@keyframes floatLight {
    0% { transform: translate(0, 0) scale(1); opacity: 0.4; }
    100% { transform: translate(20px, -20px) scale(1.2); opacity: 0.8; }
}

/* Gentle Sway Animation */
@keyframes sway {
    0% { transform: rotate(-1deg); }
    100% { transform: rotate(1deg); }
}

.animate-sway {
    animation: sway 3s ease-in-out infinite alternate;
}

/* Heartbeat Animation */
@keyframes heartbeat {
    0% { transform: scale(1); }
    15% { transform: scale(1.1); }
    30% { transform: scale(1); }
    45% { transform: scale(1.1); }
    60% { transform: scale(1); }
}

.animate-heartbeat {
    animation: heartbeat 3s infinite;
}

/* --- REDESIGNED LUXURY ENVELOPE --- */
.envelope-container {
    perspective: 1200px;
    cursor: pointer;
    margin-top: 40px;
}

.envelope {
    position: relative;
    width: 320px;
    height: 220px;
    background: #4c0519; /* Deepest red for inside */
    margin: 0 auto;
    border-radius: 6px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
}

.envelope:hover {
    transform: translateY(-8px);
    box-shadow: 0 35px 60px -15px rgba(190, 18, 60, 0.3);
}

/* Elements of the envelope */
.envelope-side {
    position: absolute;
    width: 0;
    height: 0;
    z-index: 30;
    border-style: solid;
}

.side-left {
    top: 0;
    left: 0;
    border-width: 110px 0 110px 160px; /* Top, Right, Bottom, Left */
    border-color: transparent transparent transparent #9f1239; /* Royal Red Mid */
    transform-origin: left;
}

.side-right {
    top: 0;
    right: 0;
    border-width: 110px 160px 110px 0;
    border-color: transparent #9f1239 transparent transparent;
    transform-origin: right;
}

.side-bottom {
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0;
    border-width: 0 160px 120px 160px; /* Top, Right, Bottom, Left */
    border-color: transparent transparent #be123c transparent; /* Lighter Royal Red */
    z-index: 35; /* On top of sides */
    filter: drop-shadow(0 -4px 6px rgba(0,0,0,0.1));
    transform-origin: bottom;
}

.envelope-flap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 0;
    border-width: 120px 160px 0 160px; /* Top, Right, Bottom, Left */
    border-color: #881337 transparent transparent transparent; /* Darker Royal Red for Flap */
    z-index: 50; /* Topmost when closed */
    transform-origin: top;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s, z-index 0.2s;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
}

/* Wax Seal */
.wax-seal {
    position: absolute;
    top: -90px; /* Relative to border-top area */
    left: 50%;
    transform: translateX(-50%);
    width: 44px;
    height: 44px;
    background: radial-gradient(circle at 30% 30%, #fbbf24, #b45309);
    border-radius: 50%;
    border: 2px solid #92400e;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 60;
}

.wax-seal i {
    color: #78350f;
    filter: drop-shadow(0 1px 1px rgba(255,255,255,0.2));
    width: 20px;
    height: 20px;
}

.letter {
    position: absolute;
    bottom: 10px;
    left: 15px;
    width: 290px; /* Fits inside 320px */
    height: 180px;
    background: linear-gradient(to bottom, #fffaf0 0%, #fef3c7 100%);
    padding: 20px;
    border-radius: 4px;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.5s, z-index 0.2s;
    z-index: 20; /* Between back and pockets */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

/* Open State Animations */
.envelope-container.open .envelope-flap {
    transform: rotateX(180deg);
    z-index: 10; /* Move behind sides */
    transition-delay: 0s;
}

/* When open, letter moves up */
.envelope-container.open .letter {
    transform: translateY(-110px);
    z-index: 60; /* Above everything */
    transition-delay: 0.3s;
}

/* New Pop Animation */
@keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

.animate-pop-in {
    animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
    width: 8px;
}
::-webkit-scrollbar-track {
    background: #0f172a; 
}
::-webkit-scrollbar-thumb {
    background: #334155; 
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
    background: #475569; 
}

/* Photo Placeholder Gradient */
.photo-gradient {
    background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
}

/* Royal Red Button Style */
.btn-royal {
    background: linear-gradient(45deg, #be123c, #e11d48);
    box-shadow: 0 4px 15px rgba(190, 18, 60, 0.4);
}
.btn-royal:hover {
    box-shadow: 0 6px 20px rgba(225, 29, 72, 0.6);
    transform: translateY(-2px);
}

/* Scroll To Top Button */
#scrollTopBtn {
    backdrop-filter: blur(4px);
}

/* Mobile responsiveness tweaks */
@media (max-width: 640px) {
  body {
    /* Slightly larger base text for readability on mobile */
    font-size: 17px;
  }

  /* Envelope scales down on small screens */
  .envelope-container { margin-top: 24px; }
  .envelope { width: 260px; height: 180px; }
  .letter {
    left: 12px;
    bottom: 8px;
    width: 236px;
    height: 150px;
    padding: 16px;
  }

  /* Recalculate triangle borders for the smaller envelope */
  .side-left { border-width: 90px 0 90px 130px; }
  .side-right { border-width: 90px 130px 90px 0; }
  .side-bottom { border-width: 0 130px 100px 130px; }
  .envelope-flap { border-width: 100px 130px 0 130px; }

  .wax-seal {
    top: -76px;
    width: 38px;
    height: 38px;
  }
  .wax-seal i { width: 18px; height: 18px; }

  /* When open, letter should rise a bit less on mobile */
  .envelope-container.open .letter { transform: translateY(-92px); }

  /* Scroll-to-top button: slightly smaller and closer to edges */
  #scrollTopBtn {
    right: 16px;
    bottom: 16px;
    padding: 12px;
  }

  /* Reduce glow-light blur for performance on mobile */
  .glow-light { filter: blur(10px); }
}

/* Medium screens: slight upscale from mobile but below desktop */
@media (min-width: 641px) and (max-width: 1024px) {
  .envelope { width: 300px; height: 210px; }
  .letter { left: 14px; bottom: 10px; width: 270px; height: 172px; }
  .side-left { border-width: 105px 0 105px 150px; }
  .side-right { border-width: 105px 150px 105px 0; }
  .side-bottom { border-width: 0 150px 115px 150px; }
  .envelope-flap { border-width: 115px 150px 0 150px; }
  .wax-seal { top: -86px; width: 42px; height: 42px; }
}
